angular.module("navbar",["ui.bootstrap","navbar.controllers","navbar.services"]);angular.module("navbar.controllers",["ngCookies"]).controller("NavBar",["$scope","$rootScope","$modal","$cookies","Users","User",function(c,a,e,d,f,g){c.navbarInit=function(){g.get({token:d.auth_tkt},function(b){a.userLogin=b.username})};c.toggleMenu=function(){a.show_menu=!a.show_menu};a.showMenu=function(){a.show_menu=!0};a.hideMenu=function(){a.show_menu=!1};c.isNav=!0;a.login=function(){e.open({templateUrl:"/static/angular-seed/app/partials/login.html",controller:["$scope","$modalInstance","$cookies",
"Users","$rootScope",function(b,a,c,d,e){b.loginText="\u767b\u9646";b.loginSubmit=function(){b.waitLogin=!0;b.loginText="\u767b\u5f55\u4e2d...";(new d(b.login)).$login(function(a){a.token&&(c.auth_tkt=a.token,e.userLogin=a.username);b.loginClose();b.waitLogin=!1;b.loginText="\u767b\u9646"},function(a){b.waitLogin=!1;b.loginText="\u767b\u9646";a.data.errors.forEach(function(a){/username_none/g.test(a.name)||/username_invalid/g.test(a.name)?b.loginUserF=!0:/password_none/g.test(a.name)||/password_invalid/g.test(a.name)?
b.loginPsdF=!0:/username_not_exist/g.test(a.name)?b.userNExist=!0:/password_error/g.test(a.name)&&(b.passError=!0)})})};b.rmNUE=function(){b.userNExist=!1};b.rmPasError=function(){b.passError=!1};b.loginClose=function(){a.dismiss("cancel")}}]})};a.signup=function(){location.href="/signup"};c.logout=function(){f.logout({token:d.auth_tkt},function(){d.auth_tkt="";a.userLogin=""},function(){d.auth_tkt="";a.userLogin=""})}}]);angular.module("navbar.services",["ngResource"]).factory("Users",["$resource",function(c){return c("/users",{},{login:{method:"POST"},logout:{method:"GET"}})}]).factory("User",["$resource",function(c){return c("/user",{},{get:{method:"GET"}})}]);
