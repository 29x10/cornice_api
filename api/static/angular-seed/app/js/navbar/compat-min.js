angular.module("navbar",["ui.bootstrap","navbar.controllers","navbar.services"]);angular.module("navbar.controllers",["ngCookies"]).controller("NavBar",["$scope","Users","$cookies","$rootScope","$timeout",function(a,e,c,b,d){a.toggleMenu=function(){b.show_menu=!b.show_menu};a.isNav=!0;a.signupText="\u6ce8\u518c";a.loginText="\u767b\u9646";b.login=function(){a.loginOpen=!0};b.signup=function(){location.href="/signup"};a.opts={backdropFade:!0,dialogFade:!0};a.loginClose=function(){a.loginOpen=!1};a.loginSubmit=function(){a.waitLogin=!0;a.loginText="\u767b\u5f55\u4e2d...";(new e(a.login)).$login(function(b){b.token?
(c.auth_tkt=b.token,d(function(){a.loginOpen=!1;location.reload()},10)):(a.waitLogin=!1,a.loginText="\u767b\u9646")},function(b){b.data.errors.forEach(function(b){/username_none/g.test(b.name)||/username_invalid/g.test(b.name)?a.loginUserF=!0:/password_none/g.test(b.name)||/password_invalid/g.test(b.name)?a.loginPsdF=!0:/username_not_exist/g.test(b.name)?a.userNExist=!0:/password_error/g.test(b.name)&&(a.passError=!0)});a.waitLogin=!1;a.loginText="\u767b\u9646"})};a.rmNUE=function(){a.userNExist=
!1};a.rmPasError=function(){a.passError=!1};a.logout=function(){e.logout({token:c.auth_tkt},function(){c.auth_tkt="";d(function(){location.reload()},10)},function(){c.auth_tkt="";d(function(){location.reload()},10)})}}]);angular.module("navbar.services",["ngResource"]).factory("Users",["$resource",function(a){return a("/users",{},{login:{method:"POST"},logout:{method:"GET"}})}]);
